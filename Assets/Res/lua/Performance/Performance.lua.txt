local function test0()
    local cnt = CS.GameMain.Scripts.Performance.PerformanceSetting.Count * 100

    local go = CS.UnityEngine.GameObject("_")
    local transform = go.transform

    for i = 1, cnt do
        transform.position = transform.position
    end

    CS.UnityEngine.GameObject.Destroy(go)
end

local function test1()
    local cnt = CS.GameMain.Scripts.Performance.PerformanceSetting.Count * 10

    local go = CS.UnityEngine.GameObject("_")
    local transform = go.transform

    for i = 1, cnt do
        transform:Rotate(CS.UnityEngine.Vector3.up, 1)
    end

    CS.UnityEngine.GameObject.Destroy(go)
end

local function test2()
    local cnt = CS.GameMain.Scripts.Performance.PerformanceSetting.Count * 100

    local go = CS.UnityEngine.GameObject("_")
    local transform = go.transform

    for i = 1, cnt do
        local tmp = CS.UnityEngine.Vector3(i, i, i)
        local x = tmp.x
        local y = tmp.y
        local z = tmp.z
        local r = x + y * z
    end
end

local function test3()
    local cnt = CS.GameMain.Scripts.Performance.PerformanceSetting.Count * 1
    for i = 1, cnt do
        local tmp = CS.UnityEngine.GameObject("___")
        CS.UnityEngine.GameObject.Destroy(tmp)
    end
end

local function test4()
    local cnt = CS.GameMain.Scripts.Performance.PerformanceSetting.Count * 1
    for i = 1, cnt do
        local tmp = CS.UnityEngine.GameObject("___")
        tmp:AddComponent(typeof(CS.UnityEngine.SkinnedMeshRenderer))
        local c = tmp:GetComponent(typeof(CS.UnityEngine.SkinnedMeshRenderer))
        c.receiveShadows = false
        CS.UnityEngine.GameObject.Destroy(tmp)
    end
end

local function test5()
    local cnt = CS.GameMain.Scripts.Performance.PerformanceSetting.Count * 100
    for i = 1, cnt do
        local tmp = CS.UnityEngine.Input.mousePosition;
    end
end

local function test6()
    local cnt = CS.GameMain.Scripts.Performance.PerformanceSetting.Count * 100
    for i = 1, cnt do
        local tmp = CS.UnityEngine.Vector3(i, i, i)
        CS.UnityEngine.Vector3.Normalize(tmp)
    end
end

local function test7()
    local cnt = CS.GameMain.Scripts.Performance.PerformanceSetting.Count * 10
    for i = 1, cnt do
        local t1 = CS.UnityEngine.Quaternion.Euler(i, i, i)
        local t2 = CS.UnityEngine.Quaternion.Euler(i * 2, i * 2, i * 2)
        CS.UnityEngine.Quaternion.Slerp(t1, t2, CS.UnityEngine.Random.Range(0.1, 0.9))
    end
end

local function test8()
    local cnt = CS.GameMain.Scripts.Performance.PerformanceSetting.Count * 1000
    local total = 0
    for i = 1, cnt do
        total = total + i - (i / 2) * (i + 3) / (i + 5)
    end
end

local function test9()
    local cnt = CS.GameMain.Scripts.Performance.PerformanceSetting.Count * 100
    for i = 1, cnt do
        local tmp0 = CS.UnityEngine.Vector3(1, 2, 3)
        local tmp1 = CS.UnityEngine.Vector3(4, 5, 6)
        local tmp2 = tmp0 + tmp1
    end
end

local function callfunc(func)
    local t = CS.System.Diagnostics.Stopwatch.StartNew()
    func()
    t:Stop()
    return string.format("%.2f", t.ElapsedTicks / 10000)
end

local function call(tag)
    local txt = " "
    txt = txt .. "t0:" .. callfunc(test0) .. "ms "
    txt = txt .. "t1:" .. callfunc(test1) .. "ms "
    txt = txt .. "t2:" .. callfunc(test2) .. "ms "
    txt = txt .. "t3:" .. callfunc(test3) .. "ms "
    txt = txt .. "t4:" .. callfunc(test4) .. "ms "
    txt = txt .. "t5:" .. callfunc(test5) .. "ms "
    txt = txt .. "t6:" .. callfunc(test6) .. "ms "
    txt = txt .. "t7:" .. callfunc(test7) .. "ms "
    txt = txt .. "t8:" .. callfunc(test8) .. "ms "
    txt = txt .. "t9:" .. callfunc(test9) .. "ms "

    print(tag .. txt)
end

local function run()
    print(CS.GameMain.Scripts.Performance.Performance.Call("[PerformaceAOT]"))
    print(CS.HotFix.Performance.Performance.Call("[PerformaceHotFix]"))
    call("[LuaTest]执行次数是AOT的0.1倍\t")

    CS.SRDebugerWrap.ShowConsolePanel()
end

run()
